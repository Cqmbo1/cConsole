/*!
 * cConsole - Lightweight mobile web console
 * Features: Logs, Network (XHR/Fetch/Beacon), Storage, Elements, JS Console, Plugin API
 * Author: Cqmbo__ (Cqmbo1)
 */
!function(){const e=(e,t,n)=>Math.max(t,Math.min(n,e)),t=e=>{try{return"string"==typeof e?e:"function"==typeof e?e.toString():null==e?String(e):JSON.stringify(e,function(){const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular]";e.add(n)}return n}}(),2)}catch{try{return String(e)}catch{return"[unserializable]"}}};class n{constructor(e={}){this.maxLogs=e.maxLogs??500,this.maxReqs=e.maxReqs??200,this.logs=[],this.network=[],this.overlay=null}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&this.logs.splice(0,this.logs.length-this.maxLogs)}addReq(e){this.network.push(e),this.network.length>this.maxReqs&&this.network.splice(0,this.network.length-this.maxReqs)}clearLogs(){this.logs=[]}clearNetwork(){this.network=[]}}class s{constructor(){this.subs=new Map}on(e,t){const n=this.subs.get(e)||[];return n.push(t),this.subs.set(e,n),()=>this.off(e,t)}off(e,t){const n=this.subs.get(e)||[];this.subs.set(e,n.filter((e=>e!==t)))}emit(e,t){(this.subs.get(e)||[]).forEach((e=>{try{e(t)}catch(e){}}))}}class o{constructor(e={}){this.opts=e,this.store=new n(e),this.bus=new s,this.plugins=new Map,this.activeTab="logs",this.theme="light"===e.theme?"light":"dark",this.scriptRegistry={},(()=>{if(document.getElementById("cconsole-styles"))return;const e=document.createElement("style");e.id="cconsole-styles",e.textContent="\n      .cc-floating {\n        position: fixed; bottom: 16px; right: 16px; z-index: 2147483647;\n        width: 44px; height: 44px; border-radius: 22px;\n        background: #1f6feb; color: #fff; display: flex; align-items: center; justify-content: center;\n        box-shadow: 0 6px 16px rgba(0,0,0,0.25); cursor: pointer; user-select: none;\n        font: 600 14px/1 system-ui, -apple-system, Segoe UI, Roboto;\n      }\n      .cc-panel {\n        position: fixed; inset: 0; z-index: 2147483646; display: none; background: var(--cc-bg);\n        color: var(--cc-fg); font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto;\n      }\n      .cc-panel.show { display: grid; grid-template-rows: 44px 1fr; }\n      .cc-topbar {\n        display: flex; align-items: center; gap: 8px; padding: 0 10px; border-bottom: 1px solid var(--cc-border);\n        background: var(--cc-top);\n      }\n      .cc-title { font-weight: 700; flex: 0 0 auto; }\n      .cc-tabs {\n  display: flex;\n  gap: 8px;\n  flex: 1 1 auto;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.cc-tab {\n  padding: 10px 14px;   /* bigger tap target */\n  border-radius: 6px;\n  cursor: pointer;\n  white-space: nowrap;\n  flex-shrink: 0;       /* prevent squishing */\n}\n\n      .cc-tab.active { background: var(--cc-accent-bg); color: var(--cc-accent-fg); }\n      .cc-actions { display: flex; gap: 8px; }\n      .cc-btn {\n        padding: 6px 10px; border-radius: 6px; cursor: pointer; border: 1px solid var(--cc-border);\n        background: var(--cc-btn); color: var(--cc-fg);\n      }\n      .cc-content { overflow: auto; padding: 8px; position: relative; }\n      .cc-section { margin-bottom: 8px; }\n      .cc-list { display: flex; flex-direction: column; gap: 4px; }\n      .cc-log { padding: 6px 8px; border-radius: 6px; background: var(--cc-item); border: 1px solid var(--cc-border); white-space: pre-wrap; word-break: break-word; }\n      .cc-log.level-log { border-left: 4px solid #667; }\n      .cc-log.level-info { border-left: 4px solid #2b8a3e; }\n      .cc-log.level-warn { border-left: 4px solid #f59f00; }\n      .cc-log.level-error { border-left: 4px solid #c92a2a; }\n      .cc-kv { display: grid; grid-template-columns: 1fr auto; gap: 6px; align-items: center; padding: 6px 8px; border: 1px solid var(--cc-border); border-radius: 6px; background: var(--cc-item); }\n      .cc-mono { font-family: ui-monospace, Menlo, Consolas, monospace; }\n      .cc-inputrow { display: grid; grid-template-columns: 1fr auto; gap: 8px; }\n      .cc-input {\n        width: 100%; padding: 8px; border-radius: 6px; border: 1px solid var(--cc-border);\n        background: var(--cc-item); color: var(--cc-fg);\n        font-family: ui-monospace, Menlo, Consolas, monospace;\n      }\n      .cc-tree { font-family: ui-monospace, Menlo, Consolas, monospace; }\n      .cc-node { padding: 4px 6px; border-radius: 4px; cursor: pointer; }\n      .cc-node:hover { background: var(--cc-item); }\n      .cc-overlay {\n        position: fixed; border: 2px solid #1f6feb; background: rgba(31,111,235,0.15); z-index: 2147483647; pointer-events: none;\n      }\n      .cc-close {\n        margin-left: auto; padding: 6px 10px; border-radius: 6px; cursor: pointer; border: 1px solid var(--cc-border);\n        background: var(--cc-btn); color: var(--cc-fg);\n      }\n      :root {\n        --cc-bg: #0d1117; --cc-top: #0b0f14; --cc-fg: #c9d1d9; --cc-border: #30363d;\n        --cc-item: #0d1117; --cc-btn: #0d1117; --cc-accent-bg: #1f6feb; --cc-accent-fg: #fff;\n      }\n      .cc-light {\n        --cc-bg: #ffffff; --cc-top: #f5f7fb; --cc-fg: #0b1220; --cc-border: #d0d7de;\n        --cc-item: #f8fafc; --cc-btn: #fff; --cc-accent-bg: #1f6feb; --cc-accent-fg: #fff;\n      }\n    ",document.head.appendChild(e)})(),this.initUI(),this.patchConsole(),this.patchNetwork(),this.registerBuiltinPlugins(),this.loadScriptRegistry().then((()=>{this.render(),this.restoreState()}))}async loadScriptRegistry(){try{const e="https://raw.githubusercontent.com/Cqmbo1/cConsole/refs/heads/main/scriptRegistry.json",t=await fetch(e);if(!t.ok)throw new Error("Failed to load registry: "+t.status);this.scriptRegistry=await t.json(),this._logMirror("info",["✅ Script registry loaded from GitHub"])}catch(e){this._logMirror("error",["Registry load failed",e.message]),this.scriptRegistry={bloxd:{mx:"https://gitea.com/marcus-therman/mx-public/raw/branch/main/client.user.js"},voxiom:{exploit1:"https://example.com/bloxd/exploit1.js"},cookieclicker:{autoFarm:"https://raw.githubusercontent.com/Cqmbo1/Cqmbo__-s-Scripts/refs/heads/main/Working%20Scripts/Injection%20(The%20main%20code%20of%20the%20scripts%20in%20Main)/Cookie%20Clicker"}}}}register(e){if(!e||!e.id||"function"!=typeof e.render)throw new Error("Invalid plugin");this.plugins.set(e.id,e),e.init?.(this),this.mountTab(e.id,e.name||e.id),this.render()}show(){this.panel.classList.add("show"),this.bus.emit("ui:show"),this.persistState()}hide(){this.panel.classList.remove("show"),this.bus.emit("ui:hide"),this.persistState()}toggle(){this.panel.classList.toggle("show"),this.bus.emit(this.panel.classList.contains("show")?"ui:show":"ui:hide"),this.persistState()}setTab(e){this.plugins.has(e)&&(this.activeTab=e,this.updateTabs(),this.render(),this.persistState())}initUI(){this.float=document.createElement("div"),this.float.className="cc-floating",this.float.textContent="≡";let t={active:!1,ox:0,oy:0};this.float.addEventListener("touchstart",(e=>{const n=e.touches[0];t.active=!0,t.ox=n.clientX-this.float.offsetLeft,t.oy=n.clientY-this.float.offsetTop}),{passive:!0}),this.float.addEventListener("touchmove",(n=>{if(!t.active)return;const s=n.touches[0],o=e(s.clientX-t.ox,0,window.innerWidth-this.float.offsetWidth),c=e(s.clientY-t.oy,0,window.innerHeight-this.float.offsetHeight);this.float.style.left=o+"px",this.float.style.top=c+"px",this.float.style.right="auto",this.float.style.bottom="auto"}),{passive:!0}),this.float.addEventListener("touchend",(()=>{t.active=!1})),this.float.addEventListener("click",(()=>this.toggle())),document.body.appendChild(this.float),this.panel=document.createElement("div"),this.panel.className="cc-panel "+("light"===this.theme?"cc-light":""),this.panel.innerHTML='\n        <div class="cc-topbar">\n          <div class="cc-title">cConsole</div>\n          <div class="cc-tabs" role="tablist"></div>\n          <div class="cc-actions">\n            <button class="cc-btn" data-action="clear">Clear</button>\n            <button class="cc-close">Close</button>\n          </div>\n        </div>\n        <div class="cc-content"></div>\n      ',document.body.appendChild(this.panel),this.tabsEl=this.panel.querySelector(".cc-tabs"),this.contentEl=this.panel.querySelector(".cc-content"),this.panel.querySelector(".cc-close").addEventListener("click",(()=>this.hide())),this.panel.querySelector('[data-action="clear"]').addEventListener("click",(()=>{const e=this.activeTab;this.bus.emit("tab:clear",{id:e})})),this.mountTab("logs","Logs"),this.mountTab("network","Network"),this.mountTab("storage","Storage"),this.mountTab("elements","Elements"),this.mountTab("console","Console"),this.updateTabs()}mountTab(e,t){if(this.tabsEl.querySelector('[data-tab="'+e+'"]'))return;const n=document.createElement("button");n.className="cc-tab",n.textContent=t,n.dataset.tab=e;const s=()=>this.setTab(e);n.addEventListener("click",s),n.addEventListener("touchstart",s,{passive:!0}),this.tabsEl.appendChild(n)}updateTabs(){this.tabsEl.querySelectorAll(".cc-tab").forEach((e=>{e.classList.toggle("active",e.dataset.tab===this.activeTab)}))}setTab(e){(this.plugins.has(e)||["logs","network","storage","elements","console"].includes(e))&&(this.activeTab=e,this.updateTabs(),this.render())}render(){const e=this.activeTab;this.contentEl.innerHTML="";const t=document.createElement("div");t.className="cc-section",this.contentEl.appendChild(t);const n=this.plugins.get(e);if(n)n.render(t,this);else switch(e){case"logs":this.renderLogs(t);break;case"network":this.renderNetwork(t);break;case"storage":this.renderStorage(t);break;case"elements":this.renderElements(t);break;case"console":this.renderConsole(t)}}persistState(){try{sessionStorage.setItem("__cc_state",JSON.stringify({shown:this.panel.classList.contains("show"),tab:this.activeTab,theme:this.theme}))}catch{}}restoreState(){try{const e=JSON.parse(sessionStorage.getItem("__cc_state")||"{}");e.theme&&(this.theme=e.theme),e.tab&&(this.activeTab=e.tab),e.shown?this.show():this.hide(),this.updateTabs(),this.render()}catch{}}renderLogs(e){const n=["log","info","warn","error","debug"],s=document.createElement("div");s.className="cc-section",n.forEach((e=>{const t=document.createElement("button");t.className="cc-btn",t.textContent=e,t.dataset.on="true",t.addEventListener("click",(()=>{t.dataset.on="true"===t.dataset.on?"false":"true",t.style.opacity="true"===t.dataset.on?"1":"0.5",c()})),s.appendChild(t)})),e.appendChild(s);const o=document.createElement("div");o.className="cc-list",e.appendChild(o);const c=()=>{o.innerHTML="";const e=new Set(n.filter(((e,t)=>"true"===s.children[t].dataset.on)));this.store.logs.forEach((n=>{if(!e.has(n.level))return;const s=document.createElement("div");var c;s.className=`cc-log level-${n.level}`,s.innerHTML=`<div class="cc-mono">${(c=n.args,c.map((e=>e instanceof Error?e.stack||e.message:t(e)))).join(" ")}</div>\n                          <div style="opacity:.6; font-size:12px;">${n.level.toUpperCase()} • ${new Date(n.ts).toLocaleTimeString()}</div>`,o.appendChild(s)}))};c(),this.bus.on("log:add",(()=>c())),this.bus.on("tab:clear",(({id:e})=>{"logs"===e&&(this.store.clearLogs(),c())}))}renderNetwork(e){const n=document.createElement("div");n.className="cc-list",e.appendChild(n);const s=()=>{n.innerHTML="",this.store.network.slice().reverse().forEach((e=>{const s=document.createElement("div");s.className="cc-log";const o=e.status>=400?"#c92a2a":"#2b8a3e";s.innerHTML=`\n            <div class="cc-mono" style="display:flex; justify-content:space-between; gap:8px;">\n              <span><b>${e.method}</b> ${e.url}</span>\n              <span style="color:${o}">${e.status??"ERR"}</span>\n            </div>\n            <div style="opacity:.7; font-size:12px;">\n              ${Math.round(e.duration)} ms • ${e.type||""} • ${e.size??0} B • ${new Date(e.ts).toLocaleTimeString()}\n              ${e.error?" • Error: "+t(e.error):""}\n            </div>\n          `,n.appendChild(s)}))};s(),this.bus.on("net:add",(()=>s())),this.bus.on("tab:clear",(({id:e})=>{"network"===e&&(this.store.clearNetwork(),s())}))}renderStorage(e){const t=document.createElement("div");t.className="cc-section";const n=document.createElement("button");n.className="cc-btn",n.textContent="Refresh",t.appendChild(n),e.appendChild(t);const s=document.createElement("div");s.style.display="grid",s.style.gridTemplateColumns="1fr",s.style.gap="8px",e.appendChild(s);const o=e=>{const t=document.createElement("div");t.textContent=e,t.style.fontWeight="700",t.style.marginTop="8px";const n=document.createElement("div");return n.className="cc-list",s.appendChild(t),s.appendChild(n),n},c=o("LocalStorage"),a=o("SessionStorage"),i=o("Cookies"),r=(e,t,n)=>{e.innerHTML="",t.forEach((({key:t,value:s})=>{const o=document.createElement("div");o.className="cc-kv";const c=document.createElement("div");c.innerHTML=`<div class="cc-mono"><b>${t}</b></div>\n                      <div class="cc-mono" style="opacity:.8">${s}</div>`;const a=document.createElement("div"),i=document.createElement("button");i.className="cc-btn",i.textContent="Copy",i.addEventListener("click",(()=>{navigator.clipboard.writeText(`${t}: ${s}`).catch((()=>{}))}));const r=document.createElement("button");r.className="cc-btn",r.textContent="Edit",r.addEventListener("click",(()=>{const e=prompt(`Edit value for "${t}"`,s);if(null!==e)try{"ls"===n?localStorage.setItem(t,e):"ss"===n?sessionStorage.setItem(t,e):document.cookie=`${t}=${encodeURIComponent(e)}; path=/`,l()}catch(e){}}));const d=document.createElement("button");d.className="cc-btn",d.textContent="Delete",d.addEventListener("click",(()=>{try{"ls"===n?localStorage.removeItem(t):"ss"===n?sessionStorage.removeItem(t):document.cookie=t+"=; Max-Age=0; path=/",l()}catch(e){}})),a.appendChild(i),a.appendChild(r),a.appendChild(d),o.appendChild(c),o.appendChild(a),e.appendChild(o)}))},l=()=>{r(c,(()=>{const e=[];try{for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);e.push({key:n,value:localStorage.getItem(n)})}}catch(e){}return e})(),"ls"),r(a,(()=>{const e=[];try{for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);e.push({key:n,value:sessionStorage.getItem(n)})}}catch(e){}return e})(),"ss"),r(i,(()=>{const e=[];try{document.cookie.split(";").map((e=>e.trim())).filter(Boolean).forEach((t=>{const n=t.indexOf("="),s=n>0?t.slice(0,n):t,o=n>0?t.slice(n+1):"";e.push({key:s,value:decodeURIComponent(o)})}))}catch(e){}return e})(),"ck")};n.addEventListener("click",l),l()}renderElements(e){const t=document.createElement("div");t.className="cc-section";const n=document.createElement("div");n.className="cc-tree",e.appendChild(n);const s=document.createElement("button");s.className="cc-btn",s.textContent="Snapshot",s.addEventListener("click",(()=>r(n))),e.appendChild(s);const o=document.createElement("button");o.className="cc-btn",o.textContent="Pick element",t.appendChild(s),t.appendChild(o),e.appendChild(t);const c=()=>{let e=document.querySelector(".cc-overlay");return e||(e=document.createElement("div"),e.className="cc-overlay",document.body.appendChild(e)),e};function a(e,t=0,n=5){if(!e||t>n)return null;switch(e.nodeType){case 1:return{type:"element",tag:e.tagName.toLowerCase(),id:e.id||"",class:e.className||"",attrs:[...e.attributes].map((e=>({name:e.name,value:e.value}))),children:[...e.childNodes].map((e=>a(e,t+1,n))).filter(Boolean)};case 3:const s=e.textContent.trim();return s?{type:"text",text:s}:null;case 8:return{type:"comment",text:e.textContent};case 9:return{type:"document",children:[...e.childNodes].map((e=>a(e,t+1,n))).filter(Boolean)};case 10:return{type:"doctype",name:e.name};default:return{type:"other",name:e.nodeName}}}function i(e,t){if(!e)return;const n=document.createElement("div");let s;if(n.className="cc-node","element"===e.type){const t=e.attrs.map((e=>`${e.name}="${e.value}"`)).join(" ");s=`<${e.tag}${t?" "+t:""}>`}else s="text"===e.type?`"${e.text}"`:"comment"===e.type?`\x3c!-- ${e.text} --\x3e`:"document"===e.type?"#document":"doctype"===e.type?`<!DOCTYPE ${e.name}>`:`<${e.name}>`;const o=document.createElement("div");o.textContent=s,o.style.cursor="pointer",n.appendChild(o);let c=null;if(e.children&&e.children.length&&(c=document.createElement("div"),c.style.display="none",c.style.marginLeft="16px",e.children.forEach((e=>i(e,c))),n.appendChild(c)),"element"===e.type){const t=document.createElement("div");t.textContent=`</${e.tag}>`,t.style.marginLeft="1px",t.style.display="none",n.appendChild(t),o.addEventListener("click",(()=>{const e=c&&"none"===c.style.display;c&&(c.style.display=e?"block":"none"),t.style.display=e?"block":"none"}))}t.appendChild(n)}function r(e){e.innerHTML="";const t=a(document.documentElement,0,4);t&&i(t,e)}r(n);let l=!1;o.addEventListener("click",(()=>{if(l=!l,o.style.opacity=l?"1":"0.7",l){const e=e=>{const t=e.target.getBoundingClientRect(),n=c();n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=t.width+"px",n.style.height=t.height+"px"},t=n=>{n.preventDefault(),n.stopPropagation(),l=!1,o.style.opacity="0.7";const s=n.target.getBoundingClientRect(),a=c();a.style.left=s.left+"px",a.style.top=s.top+"px",a.style.width=s.width+"px",a.style.height=s.height+"px",setTimeout((()=>{a.remove()}),700),document.removeEventListener("mousemove",e,!0),document.removeEventListener("click",t,!0)};document.addEventListener("mousemove",e,!0),document.addEventListener("click",t,!0)}})),s.addEventListener("click",r),r()}stripUserScriptHeader(e){return e.replace(/\/\/ ==UserScript==[\s\S]*?\/\/ ==\/UserScript==/,"")}async fetchAndRun(e,t){try{const n=await fetch(e);if(!n.ok)throw new Error("Fetch failed: "+n.status);let s=await n.text();return s=this.stripUserScriptHeader(s),await t(s)}catch(e){this._logMirror("error",[e.message])}}renderConsole(e){const t=document.createElement("div");t.className="cc-inputrow";const n=document.createElement("textarea");n.className="cc-input",n.rows=3,n.placeholder="Enter JS and press Run";const s=document.createElement("button");s.className="cc-btn",s.textContent="Run",t.appendChild(n),t.appendChild(s),e.appendChild(t);const o=document.createElement("div");o.className="cc-list",e.appendChild(o);const c=[];let a=-1;n.addEventListener("keydown",(e=>{"ArrowUp"===e.key?(e.preventDefault(),c.length&&(a=Math.max(0,a-1),n.value=c[a])):"ArrowDown"===e.key?(e.preventDefault(),c.length&&(a=Math.min(c.length-1,a+1),n.value=c[a])):(e.ctrlKey||e.metaKey)&&"enter"===e.key.toLowerCase()&&(e.preventDefault(),s.click())}));const i=async e=>{const t={log:(...e)=>this._logMirror("log",e),info:(...e)=>this._logMirror("info",e),warn:(...e)=>this._logMirror("warn",e),error:(...e)=>this._logMirror("error",e),debug:(...e)=>this._logMirror("debug",e)};try{const n=new Function("console","window","document",`return (async ()=>{ ${e} })()`);return await n(t,window,document)}catch(e){this._logMirror("error",[e.stack||e.message])}};s.addEventListener("click",(async()=>{const e=n.value.trim();if(!e)return;c.push(e),a=c.length-1,this._logMirror("info",[`$ ${e}`]);const t=await i(e);this._logMirror("log",[String(t)]),n.value=""})),this.renderScriptLibrary(e,i),this.bus.on("tab:clear",(({id:e})=>{"console"===e&&(o.innerHTML="")}))}renderScriptLibrary(e,t){const n=document.createElement("div");n.className="cc-lib",e.appendChild(n),Object.entries(this.scriptRegistry).forEach((([e,s])=>{const o=document.createElement("div");o.className="cc-lib-section";const c=document.createElement("div");c.textContent=e.toUpperCase(),c.className="cc-lib-title",o.appendChild(c);const a=document.createElement("div");a.className="cc-lib-row";const i=document.createElement("select");Object.entries(s).forEach((([e,t])=>{const n=document.createElement("option");n.value=t,n.textContent=e,i.appendChild(n)}));const r=document.createElement("button");r.textContent="Run",r.className="cc-btn",r.addEventListener("click",(async()=>{const e=i.value;this._logMirror("info",[`Fetching & running: ${e}`]),await this.fetchAndRun(e,t)})),a.appendChild(i),a.appendChild(r),o.appendChild(a),n.appendChild(o)}))}patchConsole(){const e={log:console.log,info:console.info,warn:console.warn,error:console.error,debug:console.debug};["log","info","warn","error","debug"].forEach((t=>{console[t]=(...n)=>{const s={level:t,args:n,ts:Date.now()};this.store.addLog(s),this.bus.emit("log:add",s);try{e[t].apply(console,n)}catch{}}}));const t=new Map,n=console.time?.bind(console),s=console.timeEnd?.bind(console);console.time=(e="default")=>{t.set(e,performance.now()),n?.(e)},console.timeEnd=(e="default")=>{const n=t.get(e),o={level:"log",args:[`${e}: ${n?(performance.now()-n).toFixed(2)+"ms":"n/a"}`],ts:Date.now()};this.store.addLog(o),this.bus.emit("log:add",o),s?.(e)}}_logMirror(e,t){const n={level:e,args:t,ts:Date.now()};this.store.addLog(n),this.bus.emit("log:add",n)}patchNetwork(){const e=XMLHttpRequest.prototype.open,n=XMLHttpRequest.prototype.send,s=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(t,n,s,o,c){return this.__cc={method:t,url:n,start:0,headers:{}},e.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){try{this.__cc&&(this.__cc.headers[e]=t)}catch{}return s.apply(this,arguments)},XMLHttpRequest.prototype.send=function(e){const s=this.__cc||(this.__cc={method:"GET",url:"",headers:{},start:0});s.start=performance.now();const o=e=>{const n=performance.now()-s.start,o=(()=>{try{return null==this.response?0:"string"==typeof this.response?this.response.length:this.response instanceof ArrayBuffer?this.response.byteLength:this.response instanceof Blob?this.response.size:t(this.response).length}catch{return 0}})();window.__cconsole?.store.addReq({method:s.method,url:s.url,status:this.status,duration:n,ok:this.status>=200&&this.status<400,type:this.responseType||"text",size:o,ts:Date.now(),error:e}),window.__cconsole?.bus.emit("net:add")};return this.addEventListener("loadend",(()=>o())),this.addEventListener("error",(e=>o(e))),n.apply(this,arguments)};const o=window.fetch;if(window.fetch=async function(e,n={}){const s=performance.now();let c="GET",a="";try{"string"==typeof e?a=e:e&&"object"==typeof e&&(a=e.url||String(e),c=e.method||c),n&&n.method&&(c=n.method)}catch{}try{const t=await o(e,n),i=performance.now()-s,r=t.clone();let l=0;try{l=(await r.text()).length}catch{}return window.__cconsole?.store.addReq({method:c,url:a,status:t.status,duration:i,ok:t.ok,type:t.headers.get("content-type")||"",size:l,ts:Date.now()}),window.__cconsole?.bus.emit("net:add"),t}catch(e){const n=performance.now()-s;throw window.__cconsole?.store.addReq({method:c,url:a,status:void 0,duration:n,ok:!1,type:"",size:0,ts:Date.now(),error:t(e)}),window.__cconsole?.bus.emit("net:add"),e}},navigator.sendBeacon){const e=navigator.sendBeacon.bind(navigator);navigator.sendBeacon=function(n,s){let o=0;try{o="string"==typeof s?s.length:s instanceof Blob?s.size:s instanceof ArrayBuffer?s.byteLength:t(s).length}catch{}return window.__cconsole?.store.addReq({method:"BEACON",url:n,status:0,duration:0,ok:!0,type:"beacon",size:o,ts:Date.now()}),window.__cconsole?.bus.emit("net:add"),e(n,s)}}}registerBuiltinPlugins(){}}window.cConsole=o;(window.__CCONSOLE_AUTO__??!1)&&(window.__cconsole=new o({theme:"dark"}))}();
